(function(){var aa=function(a,b,c){return a.call.apply(a.bind,arguments)},ba=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}},m=function(a,b,c){m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aa:ba;return m.apply(null,arguments)},n=function(a,b){var c=
Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}};Function.prototype.bind=Function.prototype.bind||function(a,b){if(1<arguments.length){var c=Array.prototype.slice.call(arguments,1);c.unshift(this,a);return m.apply(null,c)}return m(this,a)};var r=function(a,b){for(var c in b)a[c]=b[c]},ca=function(a,b){var c=function(a){a&&r(this,a)};c.prototype=a;return new c(b)};var t=function(a,b,c,d){var e=a.eventMap;e||(e=a.eventMap={});e[b]||(a.eventMap[b]=[]);a={};a.callback=c;a.object=d;e[b].push(a)},u=function(a,b,c){if(a=a.eventMap)if(b=a[b]){a=0;for(var d;d=b[a];++a){var e=d.object;d=d.callback;void 0!==e?d.call(e,c):d(c)}}};var da=function(a,b,c){window.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c)},ea=function(a,b,c){da(a,b,c);window.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)};var fa=null,ga=function(){var a;n:{if(!fa&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject)for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{new ActiveXObject(d);a=fa=d;break n}catch(e){}}a=fa}return a?new ActiveXObject(a):new XMLHttpRequest};var ha="//www.google.com/apps/reviews/js/components/modules/",ia=!1,v=function(a,b,c,d,e,f,h){"POST"==b&&ia&&(c+="&logResponse=1");var g=ga();g.open(b,a,!0);g.onreadystatechange=function(){4==g.readyState&&(e&&e(g.status,g.responseText),200!=g.status||f||eval(g.responseText))};h&&g.setRequestHeader("Content-Type",h);g.send(c)},ka=function(a,b){var c=w,d=a.componentClass,e=function(c){a.onMouseOverFlag=!0;if(void 0!==d.loaded)return!1;d.loadSpec={event:c,instance:a};var e=void 0;b&&(e=a.options.hl,
void 0===e&&(e="en"));c=ja(a.options);d.loaded=!1;var f=document.createElement("script");f.type="text/javascript";c=ha+d.type.toLowerCase()+"/"+c+"/";c=e?c+(e.toLowerCase()+"_no_ajax_on_load.js"):c+"en.js";f.src=c;document.getElementsByTagName("body")[0].appendChild(f);return!1},f=a.element;if((!a.getWidgetParentDiv(f.parentNode)||!f.getAttribute(!0))&&a.modular&&!0!==a.loaded)if("true"==a["no-lazy-load"])e(null);else{for(var h=0;h<f.childNodes.length;++h){var g=f.childNodes.item(h);1==g.nodeType&&
(c(g,"mouseover",e,a),c(g,"mouseout",function(){a.onMouseOverFlag=!1},a))}f=f.getElementsByTagName("A");for(h=0;g=f[h];++h)"none"!=g.style.display&&c(g,"focus",e,a)}},ja=function(a){return"/reviews/components/modules/"==ha?"v1":void 0!==a.version?a.version:a.latestVersion},oa=function(a,b,c,d,e){if(a.length){var f=["{"],h=a[0].options,g=h.appId;g&&f.push('"appId":'+g+",");(g=ja(h))&&f.push('"version":"'+g+'",');e&&f.push('"reqId":"'+encodeURIComponent(e)+'",');(e=h.hl)&&f.push('"hl":"'+e+'",');var k=
!0,g=!0;e=0;for(var l;l=a[e];++e)void 0===l.decorate?k=!1:g=!1;k=!k&&!g;g&&f.push('"js":true,');f.push('"specs":[');var p={},g={};for(e=0;l=a[e];++e){var q=!1;if(k&&void 0===l.decorate){var s=l.type;void 0===p[s]&&(p[s]=1,q=!0)}s=l.element;l=f;var La=g,J=q,Kb=!!c,q=b;0<e&&l.push(",");l.push("{");J&&l.push('"js":true,');J=!1;J=la(s,"g:",l,La,J);Kb&&la(s,"gw:",l,La,J);s=void 0;for(s in q)l.push(',"'),l.push(encodeURIComponent(s)),l.push('":"'),l.push(encodeURIComponent(ma(q[s]))),l.push('"');l.push("}")}f.push("]");
a={};b=[];k=[];e=0;for(var x in g)if(1<g[x]){for(;g[e];)e++;a[x]=e;b.push('"'+e+'"');k.push('"'+x+'"');e++}for(e=0;e<f.length;++e)0==f[e].indexOf("zzReserved__")&&(x=f[e].substring(12),f[e]='"'+(void 0!==a[x]?a[x]:x)+'"');f.push(',"internedKeys":['+b.join(",")+"]");f.push(',"internedValues":['+k.join(",")+"]}");x="/reviews/components";h=h.authuser;void 0!==h&&(a="authuser="+h,x+="?"+a,f.push("&"+a));-1!=window.location.search.search(/[?&]returnZipitRequest=1/)&&f.push("&returnZipitRequest=1");f="req="+
f.join("");c?na(f,h,d):v(x,"POST",f,0,d)}},na=function(a,b,c){var d="",e="/reviews/json/token";void 0!=b&&(d="authuser="+b,e+="?"+d);v(e,"POST",d,0,function(d,e){if(200!=d)c&&c(d,e);else if(e&&"{"==e.charAt(0)){var g=eval("("+e+")").channelHeader.token,k="/reviews/components";void 0!=b&&(k+="?authuser="+b);v(k,"POST",a+"&token="+g,0,c)}},!0)},ma=function(a){a||(a="");a=a.replace(/\\/g,"\\\\");return a=a.replace(/"/g,'\\"')},la=function(a,b,c,d,e){for(var f=b.length,h=0,g;g=a.attributes[h];++h)0==
g.name.indexOf(b)&&(e?c.push(","):e=!0,c.push('"'),c.push(encodeURIComponent(g.name.substr(f))),c.push('":'),g=encodeURIComponent(ma(g.value)),d[g]?d[g]++:d[g]=1,c.push("zzReserved__"+g));return e},pa=function(a,b,c){if(a=a.options.eventCallback)b.type=c,a(b)},qa=function(a,b){v("/reviews/json/search","POST",a,0,b,!0)};(function(){eval('(function(){function b(a){this.t={};this.tick=function(a,b,d){this.t[a]=[void 0!=d?d:(new Date).getTime(),b]};this.tick("start",null,a)}var a=new b;window.annotations={Timer:b,load:a}})();if(window.annotations){window.annotations.a={};window.annotations.b=1;var l=function(b,a,d){var e=b.t[a],c=b.t.start;if(e&&(c||d))return e=b.t[a][0],void 0!=d?c=d:c=c[0],e-c},p=function(b,a,d){var e="",c=b.t,g=c.start,m=[],h=[],f;for(f in c)if("start"!=f&&0!=f.indexOf("_")){var k=c[f][1];k?c[k]&&h.push(f+"."+l(b,f,c[k][0])):g&&m.push(f+"."+l(b,f))}delete c.start;if(a)for(var n in a)e+="&"+n+"="+a[n];(a=d)||(a="https:"==document.location.protocol?"https://csi.gstatic.com/csi":"http://csi.gstatic.com/csi");return[a,"?v=3","&s="+(window.annotations.sn||"zfe")+"&action=",b.name,h.length?"&it="+h.join(","):"",e,"&rt=",m.join(",")].join("")},q=function(b,a,d){b=p(b,a,d);if(!b)return"";a=new Image;var e=window.annotations.b++;window.annotations.a[e]=a;a.onload=a.onerror=function(){window.annotations&&delete window.annotations.a[e]};a.src=b;a=null;return b};window.annotations.report=function(b,a,d){if("prerender"==document.webkitVisibilityState){var e=!1,c=function(){if(!e){a?a.prerender="1":a={prerender:"1"};var g;"prerender"==document.webkitVisibilityState?g=!1:(q(b,a,d),g=!0);g&&(e=!0,document.removeEventListener("webkitvisibilitychange",c,!1))}};document.addEventListener("webkitvisibilitychange",c,!1);return""}return q(b,a,d)}};')})();var y={},z={},ra={},sa={},A={},ta={},ua=0,wa=function(a){return va(this,a)},xa=function(a){return z[a]},ya=function(a){a=a.hashCode(a);void 0===ra[a]&&(ra[a]={});return ra[a]},za=function(a,b){var c=ya(a);t(c,"changed",b,a)},Aa=function(a,b){var c=ya(a);u(c,"changed",b)},va=function(a,b){var c=y[b];void 0===c&&(c={},c.type=b,c.object=a,c.instances=[],c=ca(a,c),y[b]=c);return c},Ba=function(a){var b=a.entity;return b?"entity:"+b:"url:"+a.url+";groups:"+a.groups},Da=function(a){if(a){var b=a.componentClass,
c=a.id;Ca(a);delete z[c];a=b.instances;for(var b=0,d;d=a[b];++b)if(d.id===c){a.splice(b,1);break}}},Ea=function(){for(var a in z){var b=z[a],c;if(c=b.element){for(;c.parentNode;)c=c.parentNode;c=9==c.nodeType}else c=!1;c||Da(b)}},Ga=function(a,b,c){c&&sa[c].tick("daetlb","dai");b=b||{};this.isAuthenticated=b.isAuthenticated;if(this.requestorProfile)for(var d in b.requestorProfile)this.requestorProfile[d]=b.requestorProfile[d];else this.requestorProfile=b.requestorProfile;if(c){d=A[c];for(var e=0;e<
d.length;++e){var f=d[e][1],h=d[e][2];d[e][0].instances.push(f);z[h]=f}delete A[c]}Ea();for(var g in a)if(e=a[g],d=z[g]){if(f=e.classProps)h=y[d.type],r(h,f),delete e.classProps;f=e.augmentor;void 0!==f&&(f(),delete e.augmentor);if(f=e.callback)f(),delete e.callback;r(d,e);f={url:!0};d=d.element;h=void 0;for(h in e)f[h]&&d.setAttribute("g:"+h,e[h])}b.latestVersion&&(this.options.latestVersion=b.latestVersion);if(0!==b.decorateAll){for(g in a)a.hasOwnProperty(g)&&(d=z[g])&&void 0!==d.decorate&&d.decorate();
for(g in z)d=z[g],ka(d);for(var k in y)h=wa(k),Fa.call(h,w)}c&&(a=sa[c],a.tick("dabtle","_bda"),a.tick("lfi","daetlb"),(c=b.rpTime)&&a.tick("rpt","_startTime",c),window.annotations.report(a));(a=this.options.onLoadFinishedCallback)&&a()},Ha=function(a){for(var b={},c=0,d;d=a.attributes[c];++c){var e=d.name.indexOf("g:");0==e?b[d.name.substr(2)]=d.value:(e=d.name.indexOf("ga:"),0==e&&(b[d.name.substr(3)]=d.value))}return b},Ia=function(a,b,c,d){if(null===b.attributes.getNamedItem("g:type"))return null;
for(var e=b,f=e;e.parentNode;)if(e=e.parentNode,null!=e.attributes&&null!==e.attributes.getNamedItem("g:type")){for(var h={},g=0,k,l;k=f.attributes[g];++g)l=k.name.indexOf("g:"),0==l&&(h[k.name]=!0);for(var p={"g:id":!0},g=0;k=e.attributes[g];++g)l=k.name.indexOf("g:"),0!=l||(p[k.name]||h[k.name])||f.setAttribute(k.name,k.value);break}e=Ha(b);if(e.id)return null;f=e.type;delete e.type;a=va(a,f);f=++ua+"";b.setAttribute("g:id",f);e=ca(a,e);e.id=f;e.componentClass=a;e.element=b;e.eventSpecs=[];e.hashCode=
Ba;d?(a.instances.push(e),z[f]=e):A[c].push([a,e,f]);return e},Ja=function(a,b,c){var d=(new Date).getTime()+"-"+Math.random();A[d]=[];var e=new window.annotations.Timer;sa[d]=e;e.name="decorateWidgets";e.tick("_bda");a=a||{};r(this.options,a);e.tick("_startTime",null,0);var f=b||document.body;b=[];for(var h=f.getElementsByTagName("DIV"),g=0,k;k=h[g];g++)k=Ia(this,k,d,c),null!=k&&b.push(k);"DIV"===f.tagName&&(k=Ia(this,f,d,c),null!=k&&b.push(k));for(var l in a)a.hasOwnProperty&&!a.hasOwnProperty(l)||
-1===l.search("Callback$")||(this[l]=a[l]);a.serveFromLocal&&(ha="/reviews/components/modules/");a.logResponse&&(ia=!0);if(c){Ea();for(var p in z)d=z[p],void 0!==d.decorate&&d.decorate(),ka(d,c);for(var q in y)c=wa(q),Fa.call(c,w)}else oa(b,void 0,void 0,void 0,d);e.tick("dai","_bda");return b.length},Ka=function(a){if(null!=a.attributes.getNamedItem("g:type")){var b=Ha(a).id;void 0!=b&&(Da(z[b]),a.removeAttribute("g:id"))}},Ma=function(a){for(var b=a.getElementsByTagName("DIV"),c=0,d;d=b[c];c++)Ka(d);
"DIV"==a.tagName&&Ka(a)},Fa=function(a){for(var b=this.instances,c=0,d;d=b[c++];){var e=d.initInstance;e&&!d.initInstanceCalled&&(d.initInstanceCalled=!0,e(d,a))}},w=function(a,b,c,d){function e(a){c(a)}ea(a,b,e);d.eventSpecs.push([a,b,e])},Ca=function(a){var b=a.eventSpecs;if(b){for(var c=0,d;d=b[c];++c)da(d[0],d[1],d[2]);a.eventSpecs=[]}if(b=ya(a).eventMap)if(c=b.changed){d=[];for(var e=0,f;f=c[e];++e)f.object!==a&&d.push(f);b.changed=d}},Na=function(a){for(;a&&("DIV"!=a.tagName||!a.getAttribute||
!a.getAttribute("g:type"));)a=a.parentNode;return a};var Oa=window.google=window.google||{},Pa=Oa.annotations2=Oa.annotations2||{},Qa;if(!(Qa=Pa.component)){var B={type:"Component"};B.load=Ga;B.decorateAll=Ja;B.deleteAll=Ma;B.getClass=wa;B.getInstance=xa;B.getWidgetParentDiv=Na;B.initModule=Fa;B.bind=w;B.unbind=da;B.send=v;B.sendComponentsRequest=oa;B.sendSearchRequest=qa;B.runCustomerCallback=pa;B.defineProperties=r;B.options=ta;B.hashCode=Ba;B.dataChanged=Aa;B.addDataChangedCallback=za;Qa=B}Pa.component=Qa;var C=window.google.annotations2.component;var D=function(a,b){if(!a)return null;for(var c=0,d;d=b[c];++c)if(d.getAttribute("id")==a)return d;return null},Ra=function(a,b,c){for(var d=a.className.split(" "),e=[],f=0,h;h=d[f];++f)h!=b&&e.push(h);c&&e.push(c);a.className=e.join(" ")},Sa=function(a){return(a.className.split(" ")[0]||"")+"-slider-focus"},Ta=function(a,b){if(!b)return!1;for(;a&&a!=document;){if(a==b)return!0;a=a.parentNode}return!1},E=function(a){return a.getElementsByTagName("DIV")},Ua=function(a,b,c){return window.getComputedStyle?
document.defaultView.getComputedStyle(a,null).getPropertyValue(b):a.currentStyle?a.currentStyle[c]:""},Va=function(a){a.style.visibility="";a.style.display=""},F=function(a,b){a.style.display=b?"":"none"},Wa=function(a){for(var b=0,c;c=a.childNodes[b];++b)1==c.nodeType&&F(c,!1)},Xa=function(a,b){a.style.opacity=b/100;a.style.MozOpacity=b/100;a.style.a=b/100;a.style.filter="alpha(opacity="+b+")"},Ya=function(a){a=E(a.element);for(var b=[],c=0;c<a.length;++c)1==a[c].nodeType&&a[c].attributes.getNamedItem("g:type")&&
b.push(a[c]);return b},G=function(a){if(!a)return null;a=a.getAttribute("g:id");return C.getInstance(a)},H=function(a,b,c,d){for(var e=0,f;f=a.childNodes[e];++e)if(1==f.nodeType){var h=f.attributes&&f.attributes.getNamedItem(b);if(h&&(h.value==c||"*"==c))return f;if(d&&(f=H(f,b,c,d),null!=f))return f}return null},I=function(a){return C.getClass(a).loaded?!0:!1},Za=function(a,b){for(var c=0;c<a.length;++c)b.push(a[c])},$a=function(a){for(;a&&!a.dir;)a=a.parentNode;return a&&"rtl"==a.dir?!0:!1},K=function(a,
b,c,d){var e=c[a+"Callback"];return void 0!==e?(e(a,b,c,d),!0):!1},ab=function(a){-1!=a.indexOf("&")&&(a=a.replace(/&/g,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(/</g,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(/>/g,"&gt;"));return a},L=function(a){a=a.replace(/^(\r\n|\r|\n|\t| )+/,"");a=a.replace(/(\r\n|\r|\n|\t| )+$/,"");return a=a.replace(/(\r\n|\r|\n){3,}/,"$1$1")};var bb=function(a){if(!a)return[];var b=[];a=a.split(",");for(var c=0,d=a.length;c<d;++c){var e=a[c].split(":");if(2!=e.length)return[];var f={};f.name=e[0];f.value=parseInt(e[1],10)||0;b.push(f)}return b},cb=function(a){a=a.aspectObjs;for(var b=[],c=0,d;d=a[c];++c)"hidden"==d.root.style.visibility||b.push(d.name+":"+d.value);return b.join(",")},db=function(a,b,c){a.className=b+"-"+(c?"active":"inactive")},M=function(a,b,c){c&&(a.name=c,a.nameObj.innerHTML=c);a.value=b;db(a.angryObj,"rsw-angry",0>
b);db(a.happyObj,"rsw-happy",0<b);db(a.removeObj,"rsw-remove",0!=b)},eb=function(a,b,c){for(var d=a.aspectObjs,e=0,f;f=d[e];e++)if("hidden"==f.root.style.visibility){Va(f.root);c(f.angryObj,"click",function(){M(f,-1);return!1},a);c(f.happyObj,"click",function(){M(f,1);return!1},a);c(f.removeObj,"click",function(){M(f,0);return!1},a);M(f,b.value,b.name);break}},gb=function(a,b){if(b&&void 0!==b.aspects){for(var c=a.aspectObjs,d=bb(b.aspects),e=0,f=c.length;e<f;e++)for(var h=0;h<d.length;++h)c[e].name==
d[h].name&&M(c[e],d[h].value);fb(a)}},fb=function(a){var b=a.aspectObjs;a=a.aspectValuesSnapshot;for(var c=0,d;d=b[c];c++)a[c]=d.value},hb=function(a){var b=a.aspectObjs;a=a.aspectValuesSnapshot;for(var c=0,d;d=b[c];c++)M(d,a[c])},ib=function(a){if(a=a.aspectObjs)for(var b=0;b<a.length;++b)if(0!=a[b].value)return!0;return!1},jb=function(a,b){var c=a.element;a.componentClass.snapshotCurrentStateFn=fb;a.componentClass.resetToLastSnapshotFn=hb;var d=[];Za(c.getElementsByTagName("DIV"),d);a.aspectObjs=
[];a.aspectValuesSnapshot=[];for(var c=0,e;e=d[c];++c)if("g-root"==e.getAttribute("id")){var f={};f.root=e;f.nameObj=D("g-name",E(e));f.angryObj=D("g-angry",E(e));f.happyObj=D("g-happy",E(e));f.removeObj=D("g-remove",E(e));a.aspectObjs.push(f)}d=bb(a.aspects);c=0;for(e=d.length;c<e;c++)eb(a,d[c],b);a.componentClass.snapshotCurrentStateFn(a);C.addDataChangedCallback(a,n(gb,a))};if(!I("AspectRatingPicker")){var kb={loaded:!0};kb.initInstance=jb;var lb=C.getClass("AspectRatingPicker");r(lb,kb);lb.initModule(lb.bind)};var mb=function(a,b){var c=N(a),d=a["rating-"+(b?b:0)+"-tip"];d?(c.className="comment-box-textarea-default comment-box-tip",c.value=d):c.value=""},N=function(a){return a.element.getElementsByTagName("TEXTAREA")[0]},nb=function(a){return H(a.element,"ga:type","ReadOnly")},ob=function(a){a.commentSnapshot=O(a)},pb=function(a,b){N(a).rows=a.initialNumRows;var c=a.commentSnapshot;""==c?mb(a,b):N(a).value=c},P=function(a){var b=N(a).value,b=L(b);if(""==b)return""!=a.commentSnapshot;for(var c=0;6>=c;++c)if(b==
a["rating-"+c+"-tip"])return!1;return!0},O=function(a){return P(a)?L(N(a).value):""},qb=function(a,b){b&&void 0!==b.comment&&(N(a).value=L(b.comment),ob(a))},rb=function(a,b){a.componentClass.snapshotCurrentStateFn=ob;a.componentClass.resetToLastSnapshotFn=pb;var c=N(a);b(c,"keyup",function(){var b=N(a),c=a.expandAfterCharsExceed;0<c&&b.value.length>c&&(b.rows=a.numRowsToExpandTo);return!1},a);b(c,"focus",function(){if(!P(a)){var b=N(a);b.className="comment-box-textarea-default";b.value=""}u(a,"onFocus",
null);return!1},a);b(c,"blur",function(b){u(a,"lostFocus",b)},a);a.initialNumRows=c.rows;var d=c.attributes.getNamedItem("ga:expandAfterCharsExceed"),d=d?Number(c.attributes.getNamedItem("ga:expandAfterCharsExceed").value):-1;a.expandAfterCharsExceed=d;d=(d=c.attributes.getNamedItem("ga:numRowsToExpandTo"))?Number(c.attributes.getNamedItem("ga:numRowsToExpandTo").value):-1;a.numRowsToExpandTo=d;d=(d=a.comment)||"";a.commentSnapshot=d;c.value=L(d);C.addDataChangedCallback(a,n(qb,a))};
if(!I("CommentEditor")){var sb={loaded:!0};sb.initInstance=rb;var tb=C.getClass("CommentEditor");r(tb,sb);tb.initModule(tb.bind)};var ub=function(a){return parseInt(a.getAttribute("g:rating")||"0",10)};var vb=function(a,b){var c=a.messages;a.text.innerHTML=0<b&&6>=b?"<strong>"+c[b]+"</strong>":c[0]},wb=function(a,b){var c=a.anchorStars;c.setAttribute("aria-valuenow",b||1);c.style.width=a.starDivs[0].clientWidth*b+"px"},xb=function(a){a.ratingSnapshot=ub(a.element)},yb=function(a){var b=a.ratingSnapshot;a.rating=b;a.decorate();C.dataChanged(a,{rating:b})},zb=function(a,b){var c=b.starsDiv,d=a.relatedTarget?a.relatedTarget:a.toElement;d&&!Ta(d,c)&&Q.call(b,{fromKeyboard:!1});return!1},R=function(a){var b=
a.rating;a=a.fromKeyboard;var c=this.messages,d=this.text,e=this.starDivs,f=this.onRatingSelectCallback;void 0!==f?f(this,b,c[b],d):vb(this,b);for(c=0;c<b;)e[c++].className="rsw-starred";for(;5>c;)e[c++].className="rsw-unstarred";a&&wb(this,b)},Q=function(a){this.decorate();!0===a.fromKeyboard&&wb(this,this.rating)},Ab=function(a){var b="true"===a.unlockwhenrated,c=a.ratingLocked;return!(0===a.rating||b)||c},Db=function(a,b){Bb(b);if(!Ab(b)){var c={rating:Cb(a,b),fromKeyboard:!1};R.call(b,c)}},Eb=
function(a,b){S(a,!1,b);return!1},Fb=function(a,b){13==(a.keyCode||a.which)&&S(a,!0,b);return!1},Gb=function(a,b){Ab(b)||S(a,!1,b);return!1},Cb=function(a,b){var c=0,d=a.target||a.srcElement,e;for(e=d;e&&"DIV"!=e.tagName;)e=e.parentNode;var f=b.anchorStars;if(e!=b.starsDiv)n:{c=b.starDivs;for(d=0;d<c.length;++d)if(c[d]==e){c=d+1;break n}c=0}else d==f&&(c=d.getAttribute("aria-valuenow")-0);return c},S=function(a,b,c){var d=Cb(a,c),e=c.rating;d!=e&&(b={event:"ratingSubmit",instance:c,rating:d,oldRating:e,
fromKeyboard:b},K("onRatingAboutToWrite",a,c,m(Hb,c,b))||Hb.call(c,b,!0))},Hb=function(a,b){var c=a.rating;if(b)if(this.options.saveRatingOnPublish)this.rating=c,this.parentComponent&&(this.ratingLocked=0<c),C.dataChanged(this,a),K("onRatingWrite",a,this);else{var d=a.fromKeyboard,e=this.element;this.rating=c;e.setAttribute("g:rating",c);0==c&&"true"==e.getAttribute("ga:delete-if-rating-0")&&e.setAttribute("gw:delete_all","true");this.sendComponentsRequest([this],{event:"writeAnnotation"},!0,m(Ib,
this,a));this.ratingSnapshot=c;e.removeAttribute("gw:delete_all");d&&(d=0===c?this.anchorStars:this.anchorCancel,d.style.display="block",d.focus());K("onRatingWrite",a,this);this.parentComponent&&(this.ratingLocked=0<c);C.dataChanged(this,a)}else this.decorate()},Jb=function(a,b){R.call(b,{rating:0,fromKeyboard:!1});return!1},Lb=function(a,b){Q.call(b,{fromKeyboard:!1});return!1},Mb=function(a,b){var c=a.keyCode||a.which;if(13==c)return S(a,!0,b),!1;var d=Cb(a,b);b.getWidgetParentDiv(a.target||a.srcElement);
if((37==c||40==c)&&1<d)d--;else if((39==c||38==c)&&5>d)d++;else return!1;R.call(b,{rating:d,fromKeyboard:!0});return!1},Nb=function(a,b){var c=a.element,d=b.element;if(d){var e=$a(d),f=e?Ua(c,"border-right-width","borderRightWidth"):Ua(c,"border-left-width","borderLeftWidth"),h=Ua(c,"border-top-width","borderTopWidth"),g=E(c)[0],f=parseInt(f,10);isNaN(f)&&(f=0);h=parseInt(h,10);isNaN(h)&&(h=0);if(0<g.offsetHeight||0<g.offsetWidth)f+=e?g.offsetParent.offsetWidth-g.offsetLeft-g.offsetWidth:g.offsetLeft,
h+=g.offsetTop;var g=E(d),k=d.getElementsByTagName("SPAN"),e=-1!=navigator.userAgent.toLowerCase().indexOf("msie");g&&0<g.length&&(0<g[0].offsetHeight||0<g[0].offsetWidth)?(g=g[0],e&&(e=g.parentNode,e.offsetLeft>=g.offsetLeft&&e.offsetTop>=g.offsetTop&&(g=e))):g=k&&0<k.length?k[0].parentNode:d;e=g;$a(d)?c.style.right=e.offsetParent.offsetWidth-e.offsetLeft-e.offsetWidth-f+"px":c.style.left=e.offsetLeft-f+"px";c.style.top=e.offsetTop-h+"px";Va(c)}},Ob=function(a,b){Va(b.element);vb(b,0);return!1},
Pb=function(a,b){var c=b.element,d=Sa(c);Ra(a.target||a.srcElement,d,d);c={rating:ub(c)||1,fromKeyboard:!0};R.call(b,c);(c=b.parentComponent)&&Nb(b,c);return!1},Rb=function(a,b){Qb(a,b)},Sb=function(a,b){var c=a.target||a.srcElement,d=b.getWidgetParentDiv(c);Ra(c,Sa(d),null);c=ub(d);Q.call(b,{fromKeyboard:!0});0==c&&Qb(a,b);return!1},Bb=function(a){a.fadeOutInterval&&(window.clearInterval(a.fadeOutInterval),a.fadeOutInterval=null);a.pendingHide&&(window.clearTimeout(a.pendingHide),a.pendingHide=null);
Xa(a.element,100)},Tb=function(a,b){var c=new Date;b.fadeOutInterval=window.setInterval(function(){var d=new Date-c,e=b.element;Xa(e,100*(1-d/200));200<d&&(e.style.visibility="hidden",Bb(b),K("onWidgetHide",a,b))},30)},Qb=function(a,b){b.parentComponent&&b.hideOnFocusLoss&&(b.pendingHide||(b.pendingHide=window.setTimeout(function(){Tb(a,b)},100)),b.ratingLocked=!1)},Ub=function(a,b){var c=b.element,d=a.relatedTarget?a.relatedTarget:a.toElement;d&&(!Ta(d,c)&&null!=d.parentNode)&&Qb(a,b);return!1},
Wb=function(a,b){function c(b){return function(c){b(c,a)}}a.componentClass.snapshotCurrentStateFn=xb;a.componentClass.resetToLastSnapshotFn=yb;for(var d=a.element,e=a.starDivs,f=0,h;h=e[f];++f)b(h,"click",c(Gb),a),b(h,"mouseover",c(Db),a),b(h,"mouseout",c(zb),a);e=a.anchorStars;b(e,"focus",c(Pb),a);b(e,"blur",c(Sb),a);b(e,"keyup",c(Mb),a);b(d,"mouseout",c(Ub),a);e=a.anchorCancel;b(e,"mouseup",c(Eb),a);b(e,"keyup",c(Fb),a);b(e,"mouseover",c(Jb),a);b(e,"mouseout",c(Lb),a);b(e,"focus",c(Ob),a);b(a.lastChildAnchor,
"blur",c(Rb),a);a.isAuthenticated||b(a.text,"click",c(Vb),a);e=a.rating;d.setAttribute("g:rating",e);a.ratingSnapshot=e;a.hideOnFocusLoss=!0},Ib=function(a,b){K("onRatingWriteDone",a,this,{success:200==b})},Vb=function(a,b){K("onSignIn",a,b);return!1};
if(!I("RatingPicker")){var Xb={onRatingWrite:Hb,onRatingWriteDone:Ib,onRatingSelect:R,onRatingUnselect:Q,onSignIn:Vb,loaded:!0};Xb.initInstance=Wb;var T=C.getClass("RatingPicker");r(T,Xb);T.initModule(T.bind);var Yb=T.loadSpec;if(void 0!==Yb){var Zb=Yb.event,U=Yb.instance,$b=Zb.target||Zb.srcElement;"A"==$b.tagName&&($b==U.anchorStars&&Pb(Zb,U),$b==U.anchorCancel&&Ob(0,U))}};var ac=function(a){var b=V(a);if(a=a["title-tip"]||"")b.className="title-box-textarea-default title-box-tip";b.value=a},V=function(a){return a.element.getElementsByTagName("INPUT")[0]},bc=function(a){return H(a.element,"ga:type","ReadOnly")},cc=function(a){a.titleSnapshot=W(a)},dc=function(a){var b=a.titleSnapshot;""==b?ac(a):V(a).value=b},X=function(a){var b=V(a).value,b=L(b);return""==b?""!=a.titleSnapshot:b==a["title-tip"]?!1:!0},W=function(a){return X(a)?L(V(a).value):""},ec=function(a,b){b&&
void 0!==b.title&&(V(a).value=L(b.title),cc(a))},fc=function(a,b){a.componentClass.snapshotCurrentStateFn=cc;a.componentClass.resetToLastSnapshotFn=dc;var c=V(a);b(c,"focus",function(){if(!X(a)){var b=V(a);b.className="title-box-textarea-default";b.value=""}return!1},a);b(c,"blur",function(b){u(a,"lostFocus",b)},a);var d=a.title,d=d||"";a.titleSnapshot=d;c.value=L(d);C.addDataChangedCallback(a,n(ec,a))};
if(!I("TitleEditor")){var gc={loaded:!0};gc.initInstance=fc;var hc=C.getClass("TitleEditor");r(hc,gc);hc.initModule(hc.bind)};var ic=function(a,b){var c=b.ratingPicker;b.pendingShow||(b.pendingShow=window.setTimeout(function(){if(b.pendingShow){b.pendingShow=null;for(var d=c.instances,e=0,f;f=d[e];++e)f.parentComponent&&(f.element.style.visibility="hidden");Nb(c,b);u(c,"onMouseMoveOverStars",b.rating);K("onWidgetShow",a,b)}},200))},jc=function(a){a.pendingShow&&(window.clearTimeout(a.pendingShow),a.pendingShow=null)},kc=function(a,b){for(var c=a.element.getElementsByTagName("DIV"),d=[],e=0,f;f=c[e];++e)d.push(f);a.text&&
d.push(a.text);for(c=0;f=d[c];++c)b(f,"mouseover",function(b){ic(b,a)},a),b(f,"mouseout",function(){jc(a)},a)},lc=function(a,b){for(var c=a.element;(c=c.previousSibling)&&(1!=c.nodeType||"DIV"!==c.tagName||"RatingPicker"!=c.attributes.getNamedItem("g:type").value););c&&(c=a.getInstance(c.attributes.getNamedItem("g:id").value),a.ratingPicker=c,c.parentComponent=a);kc(a,b)};
if(!I("UserRatingAndPicker")){var mc={loaded:!0};mc.initInstance=lc;var Y=C.getClass("UserRatingAndPicker");r(Y,mc);Y.initModule(Y.bind);var nc=Y.loadSpec;if(void 0!==nc){var oc=nc.event,pc=nc.instance;!0===pc.onMouseOverFlag&&ic(oc,pc)}};var Ac=function(a,b){function c(b,c){return function(d){c&&13!==d.keyCode||b(a,d)}}var d=a.element;if(a.isAuthenticated||!qc(a,"SignInLink","https://accounts.google.com/ServiceLogin?continue="+encodeURIComponent(window.location.href))){var e=a.requestorProfile;if(e&&e.profileUrl||!qc(a,"UpdateProfileLink","//profiles.google.com/me")){rc(a,{authorName:e.displayName,authorUrl:e.profileUrl});for(var f=e=null,h=null,g=null,k=Ya(a),l=0;l<k.length;++l){var p=k[l].attributes.getNamedItem("g:type").value;
a[p]=k[l];var q=G(k[l]);if("RatingPicker"===p)e=q.rating,g=q.timestamp;else if("AspectRatingPicker"===p)h=ib(q);else if("TitleEditor"===p){var s=q.title;t(q,"lostFocus",function(){var b=G(a.TitleEditor);X(b)||b.componentClass.resetToLastSnapshotFn(b)})}else"CommentEditor"===p&&(f=q.comment,t(q,"onFocus",c(sc)),t(q,"lostFocus",function(){var b=G(a.CommentEditor);if(!P(b)){var c=G(a.RatingPicker);b.componentClass.resetToLastSnapshotFn(b,c.rating)}}))}C.addDataChangedCallback(a,n(tc,a));k=[];Za(d.getElementsByTagName("A"),
k);Za(d.getElementsByTagName("INPUT"),k);(l=H(d,"ga:type","ReadOnlyTitle"))&&k.push(l);(l=H(d,"ga:type","ReadOnlyComment"))&&k.push(l);for(l=0;l<k.length;++l)!(p=k[l].attributes.getNamedItem("ga:type"))||"Edit"!=p.value&&"Delete"!=p.value&&"ReadOnlyTitle"!=p.value&&"ReadOnlyComment"!=p.value&&"Publish"!=p.value&&"Cancel"!=p.value&&"UndoDelete"!=p.value||(a[p.value]=k[l],q=null,"Edit"==p.value?q=Z:"Delete"==p.value?q=uc:"Publish"==p.value?q=vc:"Cancel"==p.value?q=wc:"UndoDelete"==p.value&&(q=xc),q&&
(b(k[l],"click",c(q),a),b(k[l],"keyup",c(q,!0),a)));l="true"===a["always-in-edit-mode"];k=null;0===e||l?(a.TitleEditor&&(s=G(a.TitleEditor),X(s)||ac(s)),s=G(a.CommentEditor),P(s)||mb(s,e),(f||h)&&sc(a),yc(a,e),a.currentViewFn=Z,k="onEditState"):(zc(a),k="onReadonlyState",rc(a,{title:s,comment:f,rating:e}));F(d,!0);K(k,null,a,{timestamp:g})}}},sc=function(a){a.AspectRatingPicker&&F(a.AspectRatingPicker,!0);F(a.Publish,!0);F(a.Cancel,!0)},yc=function(a,b){var c="true"===a["always-in-edit-mode"];a.Publish.disabled=
0!==b||c?!1:!0},tc=function(a,b){if(b&&(void 0!==b.rating||void 0!==b.comment||void 0!==b.aspects)){yc(a,b.rating);if(void 0!==b.rating){var c=b.rating,d=G(a.CommentEditor);P(d)||mb(d,c);if(void 0===b.comment&&void 0===b.aspects)return}b.instance!==a&&a.currentViewFn==Bc&&(a.currentViewFn=Z);a.currentViewFn(a)}},vc=function(a,b){K("onReviewAboutToWrite",b,a,m(Cc,a,a))||Cc(a)},Cc=function(a){var b=[];if(a.TitleEditor){var c=G(a.TitleEditor),d=W(c);c.element.setAttribute("g:title",d);b.push(c)}var e=
G(a.CommentEditor),c=O(e);e.element.setAttribute("g:comment",c);b.push(e);if(a.AspectRatingPicker){var e=G(a.AspectRatingPicker),f=cb(e);e.element.setAttribute("g:aspects",f);b.push(e)}a.currentViewFn=zc;var e=G(a.RatingPicker),h;e&&(h=e.rating,e.element.setAttribute("g:rating",h),e.componentClass.snapshotCurrentStateFn(e),b.push(e));rc(a,{title:d,comment:c,rating:h});d={comment:c,instance:a};a.AspectRatingPicker&&(d.aspects=f);a.sendComponentsRequest(b,{event:"writeAnnotation"},!0,n(Dc,a,d,"onReviewWritten"))},
Dc=function(a,b,c,d){200==d&&C.dataChanged(a,b);K(c,null,a,{success:200==d})},$=function(a,b,c){c&&(a=H(a.element,"ga:type",b,!0))&&(a.content=c)},rc=function(a,b){$(a,"MicrodataRating",b.rating);$(a,"MicrodataComment",b.comment);$(a,"MicrodataTitle",b.title);$(a,"MicrodataAuthorName",b.authorName);$(a,"MicrodataAuthorUrl",b.authorUrl)},zc=function(a){if(a.TitleEditor){var b=G(a.TitleEditor);b.componentClass.snapshotCurrentStateFn(b)}b=G(a.CommentEditor);b.componentClass.snapshotCurrentStateFn(b);
a.AspectRatingPicker&&(b=G(a.AspectRatingPicker),b.componentClass.snapshotCurrentStateFn(b));F(a.Delete,!0);if("true"!==a["always-in-edit-mode"]){Wa(a.element);(b=G(a.UserRatingAndPicker))?(jc(b),Ca(b),F(b.element,!0)):(b=a.RatingPicker,G(b).ratingLocked=!0,F(b,!0));if(a.TitleEditor){var b=G(a.TitleEditor),c="<span>"+ab(W(b))+"</span>",d=a.ReadOnlyTitle,e=d||bc(b);e&&(F(V(b),!1),e.innerHTML=c,F(e,!0),d||F(b.element,!0))}b=G(a.CommentEditor);c=ab(O(b));c=c.replace(/\n/g,"<br>");n:{for(var e=d=0,f=
!1;d<c.length;++d){var h=c.charAt(d);if(" "==h||"\t"==h||"\n"==h)f=!0;else if(f&&(f=!1,e++,4==e)){c=[c.substring(0,d),c.substring(d)];break n}}c=[c,""]}c='<span class="comment-box-readonly-first-n">'+c[0]+"</span><span>"+c[1]+"</span>";if(e=(d=a.ReadOnlyComment)||nb(b))F(N(b),!1),e.innerHTML=c,F(e,!0),d||F(b.element,!0);if(a.AspectRatingPicker){e=G(a.AspectRatingPicker);b=e.element;d=[];c=[];e=e.aspectObjs;for(f=0;f<e.length;++f){var h=e[f].name,g=e[f].value;0<g?d.push(h):0>g&&c.push(h)}0==d.length&&
0==c.length?F(b,!1):(F(H(b,"ga:type","ReadWrite"),!1),e=H(b,"ga:type","ReadOnly"),h=H(e,"ga:type","liked"),0==d.length?F(h,!1):(f=H(h,"ga:type","aspects"),f.innerHTML=d.join(", "),F(h,!0)),d=H(e,"ga:type","disliked"),0==c.length?F(d,!1):(f=H(d,"ga:type","aspects"),f.innerHTML=c.join(", "),F(d,!0)),F(e,!0),F(b,!0))}F(a.Edit,!0);F(a.Edit.parentNode,!0);a.currentViewFn=zc}},wc=function(a){if(a.TitleEditor){var b=G(a.TitleEditor);b.componentClass.resetToLastSnapshotFn(b)}b=G(a.CommentEditor);b.componentClass.resetToLastSnapshotFn(b,
G(a.RatingPicker).rating);a.AspectRatingPicker&&(b=G(a.AspectRatingPicker),b.componentClass.resetToLastSnapshotFn(b));b=G(a.RatingPicker);a.options.saveRatingOnPublish&&b.componentClass.resetToLastSnapshotFn(b);var c="true"===a["always-in-edit-mode"];0===b.rating||c?(a=a.element.attributes.getNamedItem("ga:on-cancel-callback"))&&window[a.value]():zc(a)},Z=function(a){var b=a.componentClass.bind;Wa(a.element);if(a.TitleEditor){var c=G(a.TitleEditor),d=a.ReadOnlyTitle||bc(c);d&&F(d,!1);d=V(c);d.value=
L(d.value);F(d,!0);F(c.element,!0);(0<d.offsetHeight||0<d.offsetWidth)&&d.focus()}c=G(a.CommentEditor);(d=a.ReadOnlyComment||nb(c))&&F(d,!1);d=N(c);d.className="comment-box-textarea-default";d.value=L(d.value);F(d,!0);F(c.element,!0);(0<d.offsetHeight||0<d.offsetWidth)&&d.focus();(c=H(a.element,"ga:type","RatingLabel"))&&F(c,!0);c=a.RatingPicker;G(c).ratingLocked=!1;F(c,!0);if(c=G(a.UserRatingAndPicker))c.initInstance(c,b),F(c.element,!0);a.AspectRatingPicker&&(b=G(a.AspectRatingPicker).element,c=
H(b,"ga:type","ReadWrite"),F(H(b,"ga:type","ReadOnly"),!1),F(c,!0),F(b,!0));F(a.Publish,!0);b=G(a.RatingPicker);yc(a,b.rating);F(a.Cancel,!0);F(a.Publish.parentNode,!0);a.currentViewFn=Z},uc=function(a){var b=G(a.CommentEditor),c=O(b),b=G(a.RatingPicker).rating;a.stateBeforeDelete={comment:c,rating:b,oldRating:0};a.TitleEditor&&(c=G(a.TitleEditor),c=W(c),a.stateBeforeDelete.title=c);if(a.AspectRatingPicker){var d=G(a.AspectRatingPicker),d=cb(d);a.stateBeforeDelete.aspects=d}c=[];a.element.setAttribute("gw:delete_all",
"true");c.push(a);a.currentViewFn=Bc;b={title:"",comment:"",instance:a,rating:0,oldRating:b};a.AspectRatingPicker&&(b.aspects=d.replace(/:([-+]|)\d+/g,":0"));a.sendComponentsRequest(c,{event:"writeAnnotation"},!0,n(Ec,a,b))},Ec=function(a,b,c){a.element.removeAttribute("gw:delete_all");Dc(a,b,"onReviewDeleted",c)},Bc=function(a){Wa(a.element);F(a.UndoDelete.parentNode,!0);a.currentViewFn=Bc},xc=function(a){a.currentViewFn=Z;C.dataChanged(a,a.stateBeforeDelete);var b=[];b.push(G(a.RatingPicker));if(a.TitleEditor){var c=
G(a.TitleEditor),d=W(c);""!=d&&(c.element.setAttribute("g:title",d),b.push(c))}c=G(a.CommentEditor);d=O(c);""!=d&&(c.element.setAttribute("g:comment",d),b.push(c));if(a.AspectRatingPicker){c=G(a.AspectRatingPicker);n:{for(var d=c.aspectObjs,e=0,f;f=d[e];++e)if(0!=f.value){d=!0;break n}d=!1}d&&(d=cb(c),c.element.setAttribute("g:aspects",d),b.push(c))}a.sendComponentsRequest(b,{event:"writeAnnotation"},!0,n(Dc,a,a.stateBeforeDelete,"onReviewUndeleted"))},qc=function(a,b,c){a=a.element;b=H(a,"ga:type",
b);if(!b)return!1;for(var d=a.getElementsByTagName("*"),e=0,f=d.length;e<f;++e)F(d[e],!1);F(a,!0);F(b,!0);b.href=c;return!0};if(!I("ReviewAndAspectsWidget")){var Fc={loaded:!0};Fc.initInstance=Ac;var Gc=C.getClass("ReviewAndAspectsWidget");r(Gc,Fc);Gc.initModule(Gc.bind)};})()
